<!DOCTYPE html>
<html lang="ur">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ù¾Ø§Ú© Ù¾Û’ Ø³Ù„Ù¾: Ù¾Ø§Ú©Ø³ØªØ§Ù† Ø®Ø§Ù„Øµ ØªÙ†Ø®ÙˆØ§Û Ú©ÛŒÙ„Ú©ÙˆÙ„ÛŒÙ¹Ø±</title>
    <meta
      name="description"
      content="Ù¾Ø§Ú©Ø³ØªØ§Ù† Ù…ÛŒÚº Ø§Ù¾Ù†ÛŒ Ù…Ø§ÛØ§Ù†Û Ø®Ø§Ù„Øµ ØªÙ†Ø®ÙˆØ§Û Ú©Ø§ ÙÙˆØ±ÛŒ Ø§Ù†Ø¯Ø§Ø²Û Ù„Ú¯Ø§Ø¦ÛŒÚºÛ” Ù¾Ø§Ú©Ø³ØªØ§Ù†ÛŒ Ù…Ù„Ø§Ø²Ù…ÛŒÙ† Ø§ÙˆØ± Ú©Ø§Ø±ÙˆØ¨Ø§Ø±ÛŒ Ù…Ø§Ù„Ú©Ø§Ù† Ú©Û’ Ù„ÛŒÛ’ Ø³Ø§Ø¯ÛØŒ ØªÛŒØ² Ø§ÙˆØ± Ø¯Ø±Ø³Øª Ù†ÛŒÙ¹ Ù¾Û’ Ú©ÛŒÙ„Ú©ÙˆÙ„ÛŒÙ¹Ø±Û” ÛÙ…Ø§Ø±ÛŒ Ø¨Ø¯ÛŒÛÛŒ Ù¹ÙˆÙ„ Ú©Û’ Ø³Ø§ØªÚ¾ Ø§Ù¾Ù†ÛŒ Ù¹ÛŒÚ© ÛÙˆÙ… Ù¾Û’ Ú©Ùˆ Ø³Ù…Ø¬Ú¾ÛŒÚºÛ”"
    />
    <meta
      name="keywords"
      content="Ù¾Ø§Ú©Ø³ØªØ§Ù† ØªÙ†Ø®ÙˆØ§Û Ú©ÛŒÙ„Ú©ÙˆÙ„ÛŒÙ¹Ø±, Ù†ÛŒÙ¹ Ù¾Û’ Ù¾Ø§Ú©Ø³ØªØ§Ù†, Ø§Ù†Ú©Ù… Ù¹ÛŒÚ©Ø³ Ù¾Ø§Ú©Ø³ØªØ§Ù†, Ù¹ÛŒÚ© ÛÙˆÙ… Ù¾Û’ Ù¾Ø§Ú©Ø³ØªØ§Ù†, ØªÙ†Ø®ÙˆØ§Û Ú©Ù¹ÙˆØªÛŒØ§Úº Ù¾Ø§Ú©Ø³ØªØ§Ù†, Ù¾Ø§Ú©Ø³ØªØ§Ù† Ø§Ù†Ú©Ù… Ù¹ÛŒÚ©Ø³ Ø³Ù„ÛŒØ¨, Ú©ÛŒÙ„Ú©ÙˆÙ„ÛŒÙ¹Ø±, Ù¾Û’ Ø³Ù„Ù¾, ØªÙ†Ø®ÙˆØ§Û, Ø¢Ù…Ø¯Ù†ÛŒ, Ù¹ÛŒÚ©Ø³, Ú©Ù¹ÙˆØªÛŒØ§Úº, Ø§Ù„Ø§Ø¤Ù†Ø³Ø², Ù…Ø¬Ù…ÙˆØ¹ÛŒ ØªÙ†Ø®ÙˆØ§Û, ØªÙ†Ø®ÙˆØ§Û Ø¯Ø§Ø±, Ú©Ø§Ø±ÙˆØ¨Ø§Ø±ÛŒ Ø¢Ù…Ø¯Ù†ÛŒ, Ø®ÙˆØ¯ Ù…Ù„Ø§Ø²Ù…"
    />
    <!-- Favicon SVG - Light Green Circle with Rupee Symbol -->
    <link
      rel="icon"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='45' fill='%236fdc7d'/%3E%3Ctext x='50%' y='60%' text-anchor='middle' font-size='50' font-family='Arial, sans-serif' fill='%23fff'%3E%E2%82%A8%3C/text%3E%3C/svg%3E"
      type="image/svg+xml"
    />

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Inter Font for a modern and clean look */
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");
      body {
        font-family: "Inter", sans-serif;
        background-color: #f0f2f5; /* Light gray background */
        direction: rtl; /* Set default text direction to right-to-left for Urdu */
        text-align: right; /* Align text to the right for Urdu */
      }
      /* Override direction for specific elements if needed, e.g., numbers, labels */
      input,
      button,
      .language-toggle,
      #appTitle,
      #appDescription,
      #results,
      #tipsSection,
      #messageBox,
      footer {
        direction: ltr; /* Left-to-right for these elements */
        text-align: left; /* Align text to the left for these elements */
      }
      #appTitle,
      #appDescription,
      #resultsTitle,
      #netSalaryText,
      #netSalary,
      footer p {
        text-align: center; /* Center these specific elements */
      }
      .language-toggle {
        transition: background-color 0.3s, transform 0.2s;
        left: 4rem; /* Adjust position for RTL layout */
        right: auto;
      }
      .language-toggle:hover {
        background-color: #4a5568; /* Darker gray on hover */
        transform: translateY(-2px);
      }
      /* Custom styles for input focus */
      input:focus,
      select:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.4); /* Tailwind's indigo-500 with opacity */
      }
      /* Custom radio button styles for a more Material 3 feel */
      input[type="radio"] {
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
        width: 1.25rem; /* 20px */
        height: 1.25rem; /* 20px */
        border: 2px solid #6366f1; /* indigo-500 */
        border-radius: 50%;
        display: inline-block;
        position: relative;
        cursor: pointer;
        outline: none;
        transition: all 0.2s ease-in-out;
      }
      input[type="radio"]:checked {
        background-color: #6366f1; /* indigo-500 */
        border-color: #6366f1;
      }
      input[type="radio"]:checked::after {
        content: "";
        width: 0.5rem; /* 8px */
        height: 0.5rem; /* 8px */
        background: white;
        border-radius: 50%;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      input[type="radio"]:focus {
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.4); /* Focus ring */
      }
      /* Adjust for RTL in radio button labels */
      .flex-col label {
        flex-direction: row-reverse; /* Swap input and text for RTL */
        justify-content: flex-end; /* Align to right */
      }
      .flex-col label input[type="radio"] {
        margin-right: 0; /* Remove default margin */
        margin-left: 0.5rem; /* Add margin to the left for RTL */
      }
      .md\\:flex-row label {
        flex-direction: row; /* Keep LTR for desktop horizontal layout */
        justify-content: flex-start;
      }
      .md\\:flex-row label input[type="radio"] {
        margin-right: 0.5rem; /* Restore default margin for LTR */
        margin-left: 0;
      }
    </style>
  </head>
  <body class="flex flex-col items-center justify-center min-h-screen p-4">
    <div
      class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md mx-auto relative overflow-hidden md:max-w-lg lg:max-w-xl"
    >
      <!-- Language Toggle Button -->
      <button
        id="langToggle"
        class="language-toggle absolute top-4 right-4 bg-gray-700 text-white text-sm font-medium py-2 px-4 rounded-full shadow-md hover:bg-gray-800 transition duration-300 ease-in-out"
      >
        ENG / Ø§Ø±Ø¯Ùˆ
      </button>

      <h1
        id="appTitle"
        class="text-3xl font-bold text-gray-800 mb-4 text-center md:text-4xl"
      >
        Ù¾Ø§Ú© Ù¾Û’ Ø³Ù„Ù¾: Ù¾Ø§Ú©Ø³ØªØ§Ù† Ø®Ø§Ù„Øµ ØªÙ†Ø®ÙˆØ§Û Ú©ÛŒÙ„Ú©ÙˆÙ„ÛŒÙ¹Ø±
      </h1>
      <p
        id="appDescription"
        class="text-gray-600 mb-6 text-center text-sm leading-relaxed md:text-base"
      >
        Ø§Ù†Ú©Ù… Ù¹ÛŒÚ©Ø³ Ø§ÙˆØ± Ø¹Ø§Ù… Ú©Ù¹ÙˆØªÛŒÙˆÚº Ú©Û’ Ø¨Ø¹Ø¯ Ù¾Ø§Ú©Ø³ØªØ§Ù† Ù…ÛŒÚº Ø§Ù¾Ù†ÛŒ Ù…Ø§ÛØ§Ù†Û Ø®Ø§Ù„Øµ ØªÙ†Ø®ÙˆØ§Û Ú©Ø§
        ÙÙˆØ±ÛŒ Ø§Ù†Ø¯Ø§Ø²Û Ù„Ú¯Ø§Ø¦ÛŒÚºÛ” Ø¨Ø±Ø§Û Ú©Ø±Ù… Ù†ÙˆÙ¹ Ú©Ø±ÛŒÚº Ú©Û Ù¹ÛŒÚ©Ø³ Ú©ÛŒ Ø´Ø±Ø­ÛŒÚº Ù…Ø«Ø§Ù„ÛŒ Ù…Ø«Ø§Ù„ÛŒÚº ÛÛŒÚºÛ”
        ØªØ§Ø²Û ØªØ±ÛŒÙ† Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ú©Û’ Ù„ÛŒÛ’ ÛÙ…ÛŒØ´Û Ø³Ø±Ú©Ø§Ø±ÛŒ Ø°Ø±Ø§Ø¦Ø¹ Ø³Û’ Ø±Ø¬ÙˆØ¹ Ú©Ø±ÛŒÚºÛ”
      </p>

      <!-- Income Type Selection -->
      <div class="mb-6">
        <label
          id="incomeTypeLabel"
          class="block text-sm font-medium text-gray-700 mb-2"
          >Ø¢Ù…Ø¯Ù†ÛŒ Ú©ÛŒ Ù‚Ø³Ù… Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº:</label
        >
        <div
          class="flex flex-col space-y-3 md:flex-row md:space-y-0 md:space-x-6"
        >
          <label
            for="salaried"
            class="inline-flex items-center cursor-pointer p-3 bg-indigo-50 rounded-lg border border-indigo-200 hover:bg-indigo-100 transition duration-200 ease-in-out"
          >
            <input
              type="radio"
              id="salaried"
              name="incomeType"
              value="salaried"
              class="form-radio text-indigo-600 focus:ring-indigo-500 mr-2"
              checked
            />
            <span id="salariedText" class="text-gray-800 font-medium"
              >ØªÙ†Ø®ÙˆØ§Û Ø¯Ø§Ø± Ù…Ù„Ø§Ø²Ù…</span
            >
          </label>
          <label
            for="business"
            class="inline-flex items-center cursor-pointer p-3 bg-indigo-50 rounded-lg border border-indigo-200 hover:bg-indigo-100 transition duration-200 ease-in-out"
          >
            <input
              type="radio"
              id="business"
              name="incomeType"
              value="business"
              class="form-radio text-indigo-600 focus:ring-indigo-500 mr-2"
            />
            <span id="businessText" class="text-gray-800 font-medium"
              >Ú©Ø§Ø±ÙˆØ¨Ø§Ø±ÛŒ Ù…Ø§Ù„Ú© / Ø§Û’ Ø§Ùˆ Ù¾ÛŒ</span
            >
          </label>
        </div>
      </div>

      <!-- Input Section -->
      <div class="space-y-4 mb-6">
        <div>
          <label
            id="grossSalaryLabel"
            for="grossSalary"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Ù…Ø§ÛØ§Ù†Û Ù…Ø¬Ù…ÙˆØ¹ÛŒ ØªÙ†Ø®ÙˆØ§Û (PKR)</label
          >
          <input
            type="number"
            id="grossSalary"
            placeholder="e.g., 100000"
            class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
          />
        </div>
        <div>
          <label
            id="allowancesLabel"
            for="allowances"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Ú©Ù„ Ù…Ø§ÛØ§Ù†Û Ø§Ù„Ø§Ø¤Ù†Ø³Ø² (PKRØŒ Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label
          >
          <input
            type="number"
            id="allowances"
            placeholder="e.g., 10000"
            value="0"
            class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
          />
        </div>
        <div>
          <label
            id="otherDeductionsLabel"
            for="otherDeductions"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Ø¯ÛŒÚ¯Ø± Ù…Ø§ÛØ§Ù†Û Ú©Ù¹ÙˆØªÛŒØ§Úº (PKRØŒ Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label
          >
          <input
            type="number"
            id="otherDeductions"
            placeholder="e.g., 5000"
            value="0"
            class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
          />
        </div>
      </div>

      <!-- Calculate Button -->
      <button
        id="calculateBtn"
        class="w-full bg-indigo-600 text-white font-semibold py-3 rounded-lg shadow-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition duration-300 ease-in-out transform hover:scale-105"
      >
        Ø®Ø§Ù„Øµ ØªÙ†Ø®ÙˆØ§Û Ú©Ø§ Ø­Ø³Ø§Ø¨ Ù„Ú¯Ø§Ø¦ÛŒÚº
      </button>

      <!-- Results Section -->
      <div
        id="results"
        class="mt-8 space-y-3 p-4 bg-indigo-50 rounded-lg shadow-inner border border-indigo-200"
        style="display: none"
      >
        <h2
          id="resultsTitle"
          class="text-xl font-bold text-indigo-800 mb-3 text-center md:text-2xl"
        >
          Ø­Ø³Ø§Ø¨ Ú©Ø§ Ø®Ù„Ø§ØµÛ
        </h2>
        <p class="text-gray-800 text-lg md:text-xl">
          <strong id="taxableIncomeText">Ù‚Ø§Ø¨Ù„ Ù¹ÛŒÚ©Ø³ Ø¢Ù…Ø¯Ù†ÛŒ:</strong>
          <span id="taxableIncome" class="font-semibold text-indigo-700"
            >PKR 0</span
          >
        </p>
        <p class="text-gray-800 text-lg md:text-xl">
          <strong id="incomeTaxText">Ù…ØªÙˆÙ‚Ø¹ Ø§Ù†Ú©Ù… Ù¹ÛŒÚ©Ø³:</strong>
          <span id="incomeTax" class="font-semibold text-red-600">PKR 0</span>
        </p>
        <p class="text-gray-800 text-lg md:text-xl">
          <strong id="totalDeductionsText">Ú©Ù„ Ú©Ù¹ÙˆØªÛŒØ§Úº:</strong>
          <span id="totalDeductions" class="font-semibold text-red-600"
            >PKR 0</span
          >
        </p>
        <hr class="border-indigo-300 my-2" />
        <p class="text-gray-900 text-2xl font-bold text-center md:text-3xl">
          <strong id="netSalaryText">Ø¢Ù¾ Ú©ÛŒ Ù…ØªÙˆÙ‚Ø¹ Ù…Ø§ÛØ§Ù†Û Ø®Ø§Ù„Øµ ØªÙ†Ø®ÙˆØ§Û:</strong>
          <span id="netSalary" class="text-green-600">PKR 0</span>
        </p>
      </div>

      <!-- Tips/Advice Section - Differentiated Feature -->
      <div
        id="tipsSection"
        class="mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg shadow-md"
        style="display: none"
      >
        <h3
          id="tipsTitle"
          class="text-lg font-semibold text-blue-800 mb-2 md:text-xl"
        >
          ğŸ’¡ Ø¢Ù¾ Ú©ÛŒ ØªÙ†Ø®ÙˆØ§Û Ú©Û’ Ù„ÛŒÛ’ ÙÙˆØ±ÛŒ Ø¨ØµÛŒØ±ØªÛŒÚº
        </h3>
        <p id="tipMessage" class="text-blue-700 text-sm md:text-base"></p>
      </div>

      <!-- Message Box for Alerts -->
      <div
        id="messageBox"
        class="fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50 p-4"
        style="display: none"
      >
        <div
          class="bg-white p-6 rounded-lg shadow-xl max-w-sm w-full text-center"
        >
          <p id="messageContent" class="text-gray-800 text-lg mb-4"></p>
          <button
            id="closeMessageBox"
            class="bg-indigo-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"
          >
            Ù¹Ú¾ÛŒÚ© ÛÛ’
          </button>
        </div>
      </div>
    </div>

    <footer class="mt-8 text-gray-500 text-sm text-center">
      <p id="footerDisclaimer">
        Ø§Ø¹Ù„Ø§Ù† Ø¯Ø³ØªØ¨Ø±Ø¯Ø§Ø±ÛŒ: ÛŒÛ Ú©ÛŒÙ„Ú©ÙˆÙ„ÛŒÙ¹Ø± Ø¢Ø³Ø§Ù†ØŒ Ù…Ø«Ø§Ù„ÛŒ Ù¹ÛŒÚ©Ø³ Ù‚ÙˆØ§Ù†ÛŒÙ† Ø§ÙˆØ± Ø¹Ø§Ù… Ú©Ù¹ÙˆØªÛŒÙˆÚº Ù¾Ø±
        Ù…Ø¨Ù†ÛŒ ØªØ®Ù…ÛŒÙ†Û ÙØ±Ø§ÛÙ… Ú©Ø±ØªØ§ ÛÛ’Û” Ø§ØµÙ„ Ù¹ÛŒÚ©Ø³ Ø°Ù…Û Ø¯Ø§Ø±ÛŒØ§Úº Ø§ÙˆØ± Ú©Ù¹ÙˆØªÛŒØ§Úº Ù…Ø®ØªÙ„Ù ÛÙˆ Ø³Ú©ØªÛŒ
        ÛÛŒÚºÛ” Ø¯Ø±Ø³Øª Ø§ÙˆØ± ØªØ§Ø²Û ØªØ±ÛŒÙ† Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ú©Û’ Ù„ÛŒÛ’ Ø¨Ø±Ø§Û Ú©Ø±Ù… Ø³Ø±Ú©Ø§Ø±ÛŒ Ø°Ø±Ø§Ø¦Ø¹ ÛŒØ§ Ù¹ÛŒÚ©Ø³
        Ù¾ÛŒØ´Û ÙˆØ± Ø³Û’ Ø±Ø¬ÙˆØ¹ Ú©Ø±ÛŒÚºÛ” ØªÙ†Ø®ÙˆØ§Û Ø¯Ø§Ø± Ø§ÙˆØ± Ú©Ø§Ø±ÙˆØ¨Ø§Ø±ÛŒ Ø§ÙØ±Ø§Ø¯ Ú©Û’ Ù„ÛŒÛ’ Ù¹ÛŒÚ©Ø³ Ú©ÛŒ Ø´Ø±Ø­ÛŒÚº
        ØµØ±Ù Ù…Ø¸Ø§ÛØ±Û’ Ú©Û’ Ù…Ù‚Ø§ØµØ¯ Ú©Û’ Ù„ÛŒÛ’ Ù…Ø«Ø§Ù„ÛŒ Ù…Ø«Ø§Ù„ÛŒÚº ÛÛŒÚºÛ”
      </p>
    </footer>

    <script>
      const langToggleBtn = document.getElementById("langToggle");
      const appTitle = document.getElementById("appTitle");
      const appDescription = document.getElementById("appDescription");
      const incomeTypeLabel = document.getElementById("incomeTypeLabel");
      const salariedRadio = document.getElementById("salaried");
      const businessRadio = document.getElementById("business");
      const salariedText = document.getElementById("salariedText");
      const businessText = document.getElementById("businessText");
      const grossSalaryLabel = document.getElementById("grossSalaryLabel");
      const allowancesLabel = document.getElementById("allowancesLabel");
      const otherDeductionsLabel = document.getElementById(
        "otherDeductionsLabel"
      );
      const calculateBtn = document.getElementById("calculateBtn");
      const resultsDiv = document.getElementById("results");
      const resultsTitle = document.getElementById("resultsTitle");
      const taxableIncomeText = document.getElementById("taxableIncomeText");
      const incomeTaxText = document.getElementById("incomeTaxText");
      const totalDeductionsText = document.getElementById(
        "totalDeductionsText"
      );
      const netSalaryText = document.getElementById("netSalaryText");
      const grossSalaryInput = document.getElementById("grossSalary");
      const allowancesInput = document.getElementById("allowances");
      const otherDeductionsInput = document.getElementById("otherDeductions");
      const taxableIncomeSpan = document.getElementById("taxableIncome");
      const incomeTaxSpan = document.getElementById("incomeTax");
      const totalDeductionsSpan = document.getElementById("totalDeductions");
      const netSalarySpan = document.getElementById("netSalary");
      const tipsSection = document.getElementById("tipsSection");
      const tipsTitle = document.getElementById("tipsTitle");
      const tipMessage = document.getElementById("tipMessage");
      const footerDisclaimer = document.getElementById("footerDisclaimer");
      const messageBox = document.getElementById("messageBox");
      const messageContent = document.getElementById("messageContent");
      const closeMessageBoxBtn = document.getElementById("closeMessageBox");

      let currentLang = "ur"; // Default language set to Urdu
      let currentIncomeType = "salaried"; // Default income type

      // Text content for English and Urdu
      const textContent = {
        en: {
          appTitle: "PakPaySlip: Pakistan Net Salary Calculator",
          appDescription:
            "Quickly estimate your monthly take-home salary in Pakistan after income tax and common deductions. Please note that tax rates are illustrative examples. Always consult official sources for the most current information.",
          incomeTypeLabel: "Select Income Type:",
          salariedText: "Salaried Employee",
          businessText: "Business Owner / AOP",
          grossSalaryLabel: "Monthly Gross Salary (PKR)",
          allowancesLabel: "Total Monthly Allowances (PKR, optional)",
          otherDeductionsLabel: "Other Monthly Deductions (PKR, optional)",
          calculateBtn: "Calculate Net Salary",
          resultsTitle: "Calculation Summary",
          taxableIncomeText: "Taxable Income:",
          incomeTaxText: "Estimated Income Tax:",
          totalDeductionsText: "Total Deductions:",
          netSalaryText: "Your Estimated Monthly Net Salary:",
          tipsTitle: "ğŸ’¡ Quick Insights for Your Pay",
          footerDisclaimer:
            "Disclaimer: This calculator provides an estimation based on simplified, illustrative tax rules and general deductions. Actual tax liabilities and deductions may vary. Please consult official government sources or a tax professional for precise and up-to-date information. Tax rates for salaried and business individuals are illustrative examples for demonstration purposes only.",
          invalidInput:
            "Please enter a valid positive number for gross salary.",
          lowSalaryTip:
            "Your salary might be below the taxable threshold. Great for your take-home pay!",
          moderateSalaryTip:
            "Your income tax is a significant portion. Consider tax-saving investments if applicable.",
          highSalaryTip:
            "With a higher income, effective tax planning can be very beneficial. Explore all available deductions!",
          defaultTip:
            "Understand your deductions to maximize your take-home pay!",
          negativeInput: "Please enter non-negative values for all inputs.",
        },
        ur: {
          appTitle: "Ù¾Ø§Ú© Ù¾Û’ Ø³Ù„Ù¾: Ù¾Ø§Ú©Ø³ØªØ§Ù† Ø®Ø§Ù„Øµ ØªÙ†Ø®ÙˆØ§Û Ú©ÛŒÙ„Ú©ÙˆÙ„ÛŒÙ¹Ø±",
          appDescription:
            "Ø§Ù†Ú©Ù… Ù¹ÛŒÚ©Ø³ Ø§ÙˆØ± Ø¹Ø§Ù… Ú©Ù¹ÙˆØªÛŒÙˆÚº Ú©Û’ Ø¨Ø¹Ø¯ Ù¾Ø§Ú©Ø³ØªØ§Ù† Ù…ÛŒÚº Ø§Ù¾Ù†ÛŒ Ù…Ø§ÛØ§Ù†Û Ø®Ø§Ù„Øµ ØªÙ†Ø®ÙˆØ§Û Ú©Ø§ ÙÙˆØ±ÛŒ Ø§Ù†Ø¯Ø§Ø²Û Ù„Ú¯Ø§Ø¦ÛŒÚºÛ” Ø¨Ø±Ø§Û Ú©Ø±Ù… Ù†ÙˆÙ¹ Ú©Ø±ÛŒÚº Ú©Û Ù¹ÛŒÚ©Ø³ Ú©ÛŒ Ø´Ø±Ø­ÛŒÚº Ù…Ø«Ø§Ù„ÛŒ Ù…Ø«Ø§Ù„ÛŒÚº ÛÛŒÚºÛ” ØªØ§Ø²Û ØªØ±ÛŒÙ† Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ú©Û’ Ù„ÛŒÛ’ ÛÙ…ÛŒØ´Û Ø³Ø±Ú©Ø§Ø±ÛŒ Ø°Ø±Ø§Ø¦Ø¹ Ø³Û’ Ø±Ø¬ÙˆØ¹ Ú©Ø±ÛŒÚºÛ”",
          incomeTypeLabel: "Ø¢Ù…Ø¯Ù†ÛŒ Ú©ÛŒ Ù‚Ø³Ù… Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº:",
          salariedText: "ØªÙ†Ø®ÙˆØ§Û Ø¯Ø§Ø± Ù…Ù„Ø§Ø²Ù…",
          businessText: "Ú©Ø§Ø±ÙˆØ¨Ø§Ø±ÛŒ Ù…Ø§Ù„Ú© / Ø§Û’ Ø§Ùˆ Ù¾ÛŒ",
          grossSalaryLabel: "Ù…Ø§ÛØ§Ù†Û Ù…Ø¬Ù…ÙˆØ¹ÛŒ ØªÙ†Ø®ÙˆØ§Û (PKR)",
          allowancesLabel: "Ú©Ù„ Ù…Ø§ÛØ§Ù†Û Ø§Ù„Ø§Ø¤Ù†Ø³Ø² (PKRØŒ Ø§Ø®ØªÛŒØ§Ø±ÛŒ)",
          otherDeductionsLabel: "Ø¯ÛŒÚ¯Ø± Ù…Ø§ÛØ§Ù†Û Ú©Ù¹ÙˆØªÛŒØ§Úº (PKRØŒ Ø§Ø®ØªÛŒØ§Ø±ÛŒ)",
          calculateBtn: "Ø®Ø§Ù„Øµ ØªÙ†Ø®ÙˆØ§Û Ú©Ø§ Ø­Ø³Ø§Ø¨ Ù„Ú¯Ø§Ø¦ÛŒÚº",
          resultsTitle: "Ø­Ø³Ø§Ø¨ Ú©Ø§ Ø®Ù„Ø§ØµÛ",
          taxableIncomeText: "Ù‚Ø§Ø¨Ù„ Ù¹ÛŒÚ©Ø³ Ø¢Ù…Ø¯Ù†ÛŒ:",
          incomeTaxText: "Ù…ØªÙˆÙ‚Ø¹ Ø§Ù†Ú©Ù… Ù¹ÛŒÚ©Ø³:",
          totalDeductionsText: "Ú©Ù„ Ú©Ù¹ÙˆØªÛŒØ§Úº:",
          netSalaryText: "Ø¢Ù¾ Ú©ÛŒ Ù…ØªÙˆÙ‚Ø¹ Ù…Ø§ÛØ§Ù†Û Ø®Ø§Ù„Øµ ØªÙ†Ø®ÙˆØ§Û:",
          tipsTitle: "ğŸ’¡ Ø¢Ù¾ Ú©ÛŒ ØªÙ†Ø®ÙˆØ§Û Ú©Û’ Ù„ÛŒÛ’ ÙÙˆØ±ÛŒ Ø¨ØµÛŒØ±ØªÛŒÚº",
          footerDisclaimer:
            "Ø§Ø¹Ù„Ø§Ù† Ø¯Ø³ØªØ¨Ø±Ø¯Ø§Ø±ÛŒ: ÛŒÛ Ú©ÛŒÙ„Ú©ÙˆÙ„ÛŒÙ¹Ø± Ø¢Ø³Ø§Ù†ØŒ Ù…Ø«Ø§Ù„ÛŒ Ù¹ÛŒÚ©Ø³ Ù‚ÙˆØ§Ù†ÛŒÙ† Ø§ÙˆØ± Ø¹Ø§Ù… Ú©Ù¹ÙˆØªÛŒÙˆÚº Ù¾Ø± Ù…Ø¨Ù†ÛŒ ØªØ®Ù…ÛŒÙ†Û ÙØ±Ø§ÛÙ… Ú©Ø±ØªØ§ ÛÛ’Û” Ø§ØµÙ„ Ù¹ÛŒÚ©Ø³ Ø°Ù…Û Ø¯Ø§Ø±ÛŒØ§Úº Ø§ÙˆØ± Ú©Ù¹ÙˆØªÛŒØ§Úº Ù…Ø®ØªÙ„Ù ÛÙˆ Ø³Ú©ØªÛŒ ÛÛŒÚºÛ” Ø¯Ø±Ø³Øª Ø§ÙˆØ± ØªØ§Ø²Û ØªØ±ÛŒÙ† Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ú©Û’ Ù„ÛŒÛ’ Ø¨Ø±Ø§Û Ú©Ø±Ù… Ø³Ø±Ú©Ø§Ø±ÛŒ Ø°Ø±Ø§Ø¦Ø¹ ÛŒØ§ Ù¹ÛŒÚ©Ø³ Ù¾ÛŒØ´Û ÙˆØ± Ø³Û’ Ø±Ø¬ÙˆØ¹ Ú©Ø±ÛŒÚºÛ” ØªÙ†Ø®ÙˆØ§Û Ø¯Ø§Ø± Ø§ÙˆØ± Ú©Ø§Ø±ÙˆØ¨Ø§Ø±ÛŒ Ø§ÙØ±Ø§Ø¯ Ú©Û’ Ù„ÛŒÛ’ Ù¹ÛŒÚ©Ø³ Ú©ÛŒ Ø´Ø±Ø­ÛŒÚº ØµØ±Ù Ù…Ø¸Ø§ÛØ±Û’ Ú©Û’ Ù…Ù‚Ø§ØµØ¯ Ú©Û’ Ù„ÛŒÛ’ Ù…Ø«Ø§Ù„ÛŒ Ù…Ø«Ø§Ù„ÛŒÚº ÛÛŒÚºÛ”",
          invalidInput:
            "Ø¨Ø±Ø§Û Ú©Ø±Ù… Ù…Ø¬Ù…ÙˆØ¹ÛŒ ØªÙ†Ø®ÙˆØ§Û Ú©Û’ Ù„ÛŒÛ’ Ø¯Ø±Ø³Øª Ù…Ø«Ø¨Øª Ù†Ù…Ø¨Ø± Ø¯Ø±Ø¬ Ú©Ø±ÛŒÚºÛ”",
          lowSalaryTip:
            "Ø¢Ù¾ Ú©ÛŒ ØªÙ†Ø®ÙˆØ§Û Ù‚Ø§Ø¨Ù„ Ù¹ÛŒÚ©Ø³ Ø­Ø¯ Ø³Û’ Ú©Ù… ÛÙˆ Ø³Ú©ØªÛŒ ÛÛ’Û” Ø¢Ù¾ Ú©Û’ Ù¹ÛŒÚ© ÛÙˆÙ… Ù¾Û’ Ú©Û’ Ù„ÛŒÛ’ Ø¨ÛØª Ø§Ú†Ú¾Ø§ ÛÛ’!",
          moderateSalaryTip:
            "Ø¢Ù¾ Ú©ÛŒ Ø§Ù†Ú©Ù… Ù¹ÛŒÚ©Ø³ Ú©Ø§ Ø§ÛŒÚ© Ø§ÛÙ… Ø­ØµÛ ÛÛ’Û” Ø§Ú¯Ø± Ù‚Ø§Ø¨Ù„ Ø§Ø·Ù„Ø§Ù‚ ÛÙˆ ØªÙˆ Ù¹ÛŒÚ©Ø³ Ø¨Ú†Øª Ø³Ø±Ù…Ø§ÛŒÛ Ú©Ø§Ø±ÛŒ Ù¾Ø± ØºÙˆØ± Ú©Ø±ÛŒÚºÛ”",
          highSalaryTip:
            "Ø²ÛŒØ§Ø¯Û Ø¢Ù…Ø¯Ù†ÛŒ Ú©Û’ Ø³Ø§ØªÚ¾ØŒ Ù…ÙˆØ«Ø± Ù¹ÛŒÚ©Ø³ Ù…Ù†ØµÙˆØ¨Û Ø¨Ù†Ø¯ÛŒ Ø¨ÛØª ÙØ§Ø¦Ø¯Û Ù…Ù†Ø¯ ÛÙˆ Ø³Ú©ØªÛŒ ÛÛ’Û” ØªÙ…Ø§Ù… Ø¯Ø³ØªÛŒØ§Ø¨ Ú©Ù¹ÙˆØªÛŒÙˆÚº Ú©Ùˆ ØªÙ„Ø§Ø´ Ú©Ø±ÛŒÚº!",
          defaultTip:
            "Ø§Ù¾Ù†ÛŒ Ù¹ÛŒÚ© ÛÙˆÙ… Ù¾Û’ Ú©Ùˆ Ø²ÛŒØ§Ø¯Û Ø³Û’ Ø²ÛŒØ§Ø¯Û Ú©Ø±Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Ø§Ù¾Ù†ÛŒ Ú©Ù¹ÙˆØªÛŒÙˆÚº Ú©Ùˆ Ø³Ù…Ø¬Ú¾ÛŒÚº!",
          negativeInput: "Ø¨Ø±Ø§Û Ú©Ø±Ù… ØªÙ…Ø§Ù… Ø§Ù† Ù¾Ù¹ Ú©Û’ Ù„ÛŒÛ’ ØºÛŒØ± Ù…Ù†ÙÛŒ Ù‚Ø¯Ø±ÛŒÚº Ø¯Ø±Ø¬ Ú©Ø±ÛŒÚºÛ”",
        },
      };

      /**
       * Updates the UI elements based on the current language setting.
       */
      function updateLanguage() {
        const content = textContent[currentLang];
        appTitle.textContent = content.appTitle;
        appDescription.textContent = content.appDescription;
        incomeTypeLabel.textContent = content.incomeTypeLabel;
        salariedText.textContent = content.salariedText;
        businessText.textContent = content.businessText;
        grossSalaryLabel.textContent = content.grossSalaryLabel;
        allowancesLabel.textContent = content.allowancesLabel;
        otherDeductionsLabel.textContent = content.otherDeductionsLabel;
        calculateBtn.textContent = content.calculateBtn;
        resultsTitle.textContent = content.resultsTitle;
        taxableIncomeText.textContent = content.taxableIncomeText;
        incomeTaxText.textContent = content.incomeTaxText;
        totalDeductionsText.textContent = content.totalDeductionsText;
        netSalaryText.textContent = content.netSalaryText;
        tipsTitle.textContent = content.tipsTitle;
        footerDisclaimer.textContent = content.footerDisclaimer;
        closeMessageBoxBtn.textContent =
          currentLang === "en" ? "OK" : "Ù¹Ú¾ÛŒÚ© ÛÛ’"; // Update message box button text

        // Update language toggle button text
        langToggleBtn.textContent =
          currentLang === "en" ? "Ø§Ø±Ø¯Ùˆ / ENG" : "ENG / Ø§Ø±Ø¯Ùˆ";

        // Set HTML lang attribute and body direction
        document.documentElement.lang = currentLang;
        document.body.style.direction = currentLang === "ur" ? "rtl" : "ltr";
        document.body.style.textAlign = currentLang === "ur" ? "right" : "left";

        // Apply specific direction and text-align overrides for LTR elements
        const ltrElements = document.querySelectorAll(
          "input, button, .language-toggle, #results, #tipsSection, #messageBox, footer"
        );
        ltrElements.forEach((el) => {
          el.style.direction = "ltr";
          el.style.textAlign = "left";
        });

        // Center align specific elements
        const centerElements = document.querySelectorAll(
          "#appTitle, #appDescription, #resultsTitle, #netSalaryText, #netSalary, footer p"
        );
        centerElements.forEach((el) => {
          el.style.textAlign = "center";
        });

        // Adjust language toggle button position based on direction
        if (currentLang === "ur") {
          langToggleBtn.style.left = "4rem";
          langToggleBtn.style.right = "auto";
        } else {
          langToggleBtn.style.right = "4rem";
          langToggleBtn.style.left = "auto";
        }

        // Adjust radio button label direction for RTL
        const radioLabels = document.querySelectorAll(".flex-col label");
        radioLabels.forEach((label) => {
          if (currentLang === "ur") {
            label.style.flexDirection = "row-reverse";
            label.style.justifyContent = "flex-end";
            label.querySelector('input[type="radio"]').style.marginRight = "0";
            label.querySelector('input[type="radio"]').style.marginLeft =
              "0.5rem";
          } else {
            label.style.flexDirection = "row";
            label.style.justifyContent = "flex-start";
            label.querySelector('input[type="radio"]').style.marginRight =
              "0.5rem";
            label.querySelector('input[type="radio"]').style.marginLeft = "0";
          }
        });
      }

      /**
       * Displays a custom message box with the given message.
       * @param {string} message - The message to display.
       */
      function showMessageBox(message) {
        messageContent.textContent = message;
        messageBox.style.display = "flex";
      }

      /**
       * Hides the custom message box.
       */
      function hideMessageBox() {
        messageBox.style.display = "none";
      }

      closeMessageBoxBtn.addEventListener("click", hideMessageBox);

      /**
       * Calculates the estimated annual income tax based on simplified, illustrative Pakistan tax slabs.
       * IMPORTANT: These rates are for demonstration purposes ONLY and may not reflect current official tax rates.
       * Users should consult official FBR (Federal Board of Revenue) sources for accurate information.
       * @param {number} annualTaxableIncome - The annual taxable income in PKR.
       * @param {string} incomeType - 'salaried' or 'business'.
       * @returns {number} The estimated annual income tax.
       */
      function calculateIncomeTax(annualTaxableIncome, incomeType) {
        if (incomeType === "salaried") {
          if (annualTaxableIncome <= 600000) {
            return 0;
          } else if (annualTaxableIncome <= 1200000) {
            // PKR 0 + 2.5% of the amount exceeding PKR 600,000
            return (annualTaxableIncome - 600000) * 0.025;
          } else if (annualTaxableIncome <= 2400000) {
            // PKR 15,000 + 12.5% of the amount exceeding PKR 1,200,000
            return 15000 + (annualTaxableIncome - 1200000) * 0.125;
          } else if (annualTaxableIncome <= 3600000) {
            // PKR 165,000 + 22.5% of the amount exceeding PKR 2,400,000
            return 165000 + (annualTaxableIncome - 2400000) * 0.225;
          } else if (annualTaxableIncome <= 6000000) {
            // PKR 435,000 + 27.5% of the amount exceeding PKR 3,600,000
            return 435000 + (annualTaxableIncome - 3600000) * 0.275;
          } else {
            // PKR 1,095,000 + 35% of the amount exceeding PKR 6,000,000
            return 1095000 + (annualTaxableIncome - 6000000) * 0.35;
          }
        } else if (incomeType === "business") {
          // Illustrative tax slabs for Business Owner / AOP (Association of Persons)
          // These are simplified and for demonstration purposes only.
          if (annualTaxableIncome <= 600000) {
            return 0;
          } else if (annualTaxableIncome <= 1200000) {
            // PKR 0 + 7.5% of the amount exceeding PKR 600,000
            return (annualTaxableIncome - 600000) * 0.075;
          } else if (annualTaxableIncome <= 2400000) {
            // PKR 45,000 + 15% of the amount exceeding PKR 1,200,000
            return 45000 + (annualTaxableIncome - 1200000) * 0.15;
          } else if (annualTaxableIncome <= 3600000) {
            // PKR 225,000 + 20% of the amount exceeding PKR 2,400,000
            return 225000 + (annualTaxableIncome - 2400000) * 0.2;
          } else if (annualTaxableIncome <= 6000000) {
            // PKR 465,000 + 25% of the amount exceeding PKR 3,600,000
            return 465000 + (annualTaxableIncome - 3600000) * 0.25;
          } else {
            // PKR 1,065,000 + 35% of the amount exceeding PKR 6,000,000
            return 1065000 + (annualTaxableIncome - 6000000) * 0.35;
          }
        }
        return 0; // Default case
      }

      /**
       * Generates a tip message based on the calculated net salary.
       * @param {number} netSalary - The calculated monthly net salary.
       * @param {number} grossSalary - The input monthly gross salary.
       * @param {number} incomeTax - The calculated monthly income tax.
       * @param {string} incomeType - The selected income type ('salaried' or 'business').
       * @returns {string} The tip message.
       */
      function generateTip(netSalary, grossSalary, incomeTax, incomeType) {
        const content = textContent[currentLang];
        // Taxable threshold varies by income type for general tips
        const annualTaxableThreshold =
          incomeType === "salaried" ? 600000 : 600000; // Using same illustrative threshold for both for simplicity in tips

        if (grossSalary <= annualTaxableThreshold / 12) {
          // Roughly below annual taxable threshold
          return content.lowSalaryTip;
        } else if (incomeTax / grossSalary > 0.15) {
          // If tax is more than 15% of gross
          return content.highSalaryTip;
        } else if (incomeTax > 0) {
          return content.moderateSalaryTip;
        } else {
          return content.defaultTip;
        }
      }

      /**
       * Saves the current input values and selected income type to local storage.
       */
      function saveInputs() {
        localStorage.setItem("grossSalary", grossSalaryInput.value);
        localStorage.setItem("allowances", allowancesInput.value);
        localStorage.setItem("otherDeductions", otherDeductionsInput.value);
        localStorage.setItem("incomeType", currentIncomeType);
      }

      /**
       * Loads input values and selected income type from local storage, if available.
       */
      function loadInputs() {
        const savedGrossSalary = localStorage.getItem("grossSalary");
        const savedAllowances = localStorage.getItem("allowances");
        const savedOtherDeductions = localStorage.getItem("otherDeductions");
        const savedIncomeType = localStorage.getItem("incomeType");

        if (savedGrossSalary) {
          grossSalaryInput.value = savedGrossSalary;
        }
        if (savedAllowances) {
          allowancesInput.value = savedAllowances;
        }
        if (savedOtherDeductions) {
          otherDeductionsInput.value = savedOtherDeductions;
        }
        if (savedIncomeType) {
          currentIncomeType = savedIncomeType;
          if (currentIncomeType === "salaried") {
            salariedRadio.checked = true;
          } else {
            businessRadio.checked = true;
          }
        }
      }

      /**
       * Main function to perform salary calculation and update UI.
       */
      function calculateNetSalary() {
        const grossSalary = parseFloat(grossSalaryInput.value);
        const allowances = parseFloat(allowancesInput.value) || 0;
        const otherDeductions = parseFloat(otherDeductionsInput.value) || 0;

        // Input validation
        if (isNaN(grossSalary) || grossSalary <= 0) {
          showMessageBox(textContent[currentLang].invalidInput);
          resultsDiv.style.display = "none";
          tipsSection.style.display = "none";
          return;
        }
        if (allowances < 0 || otherDeductions < 0) {
          showMessageBox(textContent[currentLang].negativeInput);
          resultsDiv.style.display = "none";
          tipsSection.style.display = "none";
          return;
        }

        // Save inputs to local storage
        saveInputs();

        // Calculate monthly basic income (simplified: Gross - Allowances)
        // A real scenario would involve Basic Pay + House Rent Allowance + Conveyance Allowance, etc.
        // For simplicity, we assume taxable income is Gross Salary - Allowances.
        const taxableIncomeMonthly = grossSalary - allowances;
        const annualTaxableIncome = taxableIncomeMonthly * 12;

        // Calculate annual income tax based on selected income type
        const annualIncomeTax = calculateIncomeTax(
          annualTaxableIncome,
          currentIncomeType
        );
        const monthlyIncomeTax = annualIncomeTax / 12;

        // Other standard deductions (illustrative fixed values for simplicity)
        // EOBI (Employees' Old-Age Benefits Institution) - Example fixed monthly contribution
        // This deduction is typically for salaried employees, but we include it for simplicity.
        const eobiDeduction = currentIncomeType === "salaried" ? 250 : 0; // Only for salaried

        // Total monthly deductions
        const totalDeductions =
          monthlyIncomeTax + eobiDeduction + otherDeductions;

        // Calculate net salary
        const netSalary = grossSalary - totalDeductions;

        // Display results
        taxableIncomeSpan.textContent = `PKR ${taxableIncomeMonthly.toLocaleString(
          undefined,
          { minimumFractionDigits: 0, maximumFractionDigits: 0 }
        )}`;
        incomeTaxSpan.textContent = `PKR ${monthlyIncomeTax.toLocaleString(
          undefined,
          { minimumFractionDigits: 0, maximumFractionDigits: 0 }
        )}`;
        totalDeductionsSpan.textContent = `PKR ${totalDeductions.toLocaleString(
          undefined,
          { minimumFractionDigits: 0, maximumFractionDigits: 0 }
        )}`;
        netSalarySpan.textContent = `PKR ${netSalary.toLocaleString(undefined, {
          minimumFractionDigits: 0,
          maximumFractionDigits: 0,
        })}`;

        resultsDiv.style.display = "block";

        // Display tips
        tipMessage.textContent = generateTip(
          netSalary,
          grossSalary,
          monthlyIncomeTax,
          currentIncomeType
        );
        tipsSection.style.display = "block";
      }

      // Event Listeners
      langToggleBtn.addEventListener("click", () => {
        currentLang = currentLang === "en" ? "ur" : "en";
        updateLanguage();
      });

      // Event listeners for income type radio buttons
      salariedRadio.addEventListener("change", () => {
        currentIncomeType = "salaried";
        saveInputs(); // Save the new income type
        calculateNetSalary(); // Recalculate with new type
      });
      businessRadio.addEventListener("change", () => {
        currentIncomeType = "business";
        saveInputs(); // Save the new income type
        calculateNetSalary(); // Recalculate with new type
      });

      calculateBtn.addEventListener("click", calculateNetSalary);

      // Load inputs on page load
      window.addEventListener("load", () => {
        loadInputs();
        updateLanguage(); // Initial language update
        // Perform an initial calculation if values are loaded, or if default values exist.
        // This prevents an empty state if user just loads the page with saved data.
        if (grossSalaryInput.value && parseFloat(grossSalaryInput.value) > 0) {
          calculateNetSalary();
        }
      });

      // Optionally, recalculate on input change for dynamic updates
      grossSalaryInput.addEventListener("input", calculateNetSalary);
      allowancesInput.addEventListener("input", calculateNetSalary);
      otherDeductionsInput.addEventListener("input", calculateNetSalary);
    </script>
  </body>
</html>
